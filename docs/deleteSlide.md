# 誤って投稿した進捗発表資料の削除

進捗資料を公開する操作を誤った場合は、データベースを操作して修正してください。
操作方法については[データベースの起動方法 (サーバ)](/docs/serverDB.md)を参考にしてください。

## スライドを公開するTopicを間違えた場合

![スライドの誤挿入](https://private-user-images.githubusercontent.com/79183832/310664018-280bd99a-a8ef-49b7-9959-9e3babc76757.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk3NTk3NzUsIm5iZiI6MTcwOTc1OTQ3NSwicGF0aCI6Ii83OTE4MzgzMi8zMTA2NjQwMTgtMjgwYmQ5OWEtYThlZi00OWI3LTk5NTktOWUzYmFiYzc2NzU3LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDAzMDYlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwMzA2VDIxMTExNVomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWRhZDg0MWEyOTNkMmM5MjAwYmIwM2RiNDI0YjQ2MzgyNTE0NzMzNTAyNmRhZjEwYTVhZmFjOTU3MGIxMmFjYWEmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.0hfDdG0rJZxvbCPyJC6Fl8q71MEpp8yYFOg-v6zq86s)

はじめに、間違ってスライドを載せたトピックのIDをデータベースから確認します。同じ行の created_at の値を見ると、2024年2月21日にこのトピックが作られたことがわかります。

```bash
MariaDB [(none)]> USE ctrlPublicSite;
MariaDB [ctrlPublicSite]> SELECT * FROM pubtopics;
```

![topicIDを調べる](https://private-user-images.githubusercontent.com/79183832/310667113-5b8b6eb6-50d9-44cd-be2e-ce765bda0fda.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk3NjA0NTMsIm5iZiI6MTcwOTc2MDE1MywicGF0aCI6Ii83OTE4MzgzMi8zMTA2NjcxMTMtNWI4YjZlYjYtNTBkOS00NGNkLWJlMmUtY2U3NjViZGEwZmRhLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDAzMDYlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwMzA2VDIxMjIzM1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTZmYTU2NjM4NGVmYTI1MjJjYjczOGJkMDAzZDUxODMwNWViNDY3ZTNmYjAxNGJmYjEzYTNlZGM2ZTZmMzZjYjUmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.xDMbKjWO4fFjX8dg7vG_n73pJS7HY8O2PWPtgYnQ6rE)

誤ってスライドを追加したトピックのIDは `clsvu9ry10000x8kupgr0x41u` のようです。このIDを用いて、トピックに紐づくスライドの一覧を取得します。

```bash
MariaDB [ctrlPublicSite]> SELECT * FROM pubslides WHERE pubtopics_id="clsvu9ry10000x8kupgr0x41u";
```

![topicに関連するスライド一覧](https://private-user-images.githubusercontent.com/79183832/310676901-6899046b-3b4c-4ee3-98b7-5f853dcafb57.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk3NjI2MjMsIm5iZiI6MTcwOTc2MjMyMywicGF0aCI6Ii83OTE4MzgzMi8zMTA2NzY5MDEtNjg5OTA0NmItM2I0Yy00ZWUzLTk4YjctNWY4NTNkY2FmYjU3LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDAzMDYlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwMzA2VDIxNTg0M1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTNkZDFlZjI3MzJkMWJmY2E1YjlmODU5YWEzMzE5ODFlMjg5YjkxNzBhZTIyMzExYWJkNDdkY2Q4NzQ0ZjRjMjEmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.ssyAhj4scZCtrmyb6ArwNvqtS4Bil2MIiEt1irmqbrw)

created_at の値を見ると、おそらく3月6日に追加されたスライドが誤ったものだとわかります。

これらのスライドは、トピックのIDが `clsvu9ry10000x8kupgr0x41u` かつ created_at が 3月6日 のものです。DELETE文でこの条件に一致するスライドを削除します。

```bash
MariaDB [ctrlPublicSite]> DELETE FROM pubslides WHERE pubtopics_id="clsvu9ry10000x8kupgr0x41u" AND created_at > "2024-03-06 00:00:00";
```

![削除した結果](https://private-user-images.githubusercontent.com/79183832/310678744-62c15dac-e86a-479b-8905-4228eeb1d263.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDk3NjMwMzUsIm5iZiI6MTcwOTc2MjczNSwicGF0aCI6Ii83OTE4MzgzMi8zMTA2Nzg3NDQtNjJjMTVkYWMtZTg2YS00NzliLTg5MDUtNDIyOGVlYjFkMjYzLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDAzMDYlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwMzA2VDIyMDUzNVomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWMwYmJjY2Q5YWM0ZDdmOTYzZjcwYmVjOWUzOWIwMTBmOTU2Yjc3MThlOGQ0MzNmNmI2YzQwMDMxZTQ1NmUxOTYmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.ynPHwF9pexw4gljoYWrj2_KT--Bns3TbZJq1ak_kvk8)


## 不要なTopicを作成した場合

次のコマンドから削除したいトピックのIDを探し、whereで指定して削除します。

```bash
MariaDB [(none)]> USE ctrlPublicSite;
MariaDB [ctrlPublicSite]> DELETE FROM pubtopics WHERE id=[削除したいトピックのID];
```

